---
title: "09 - Efficient collaboration"
author: "Melanie Buhlmann"
date: "`r Sys.Date()`"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

#usethis::pr_init("chapter09")
#devtools::install_dev_deps()

```

# Efficient collaboration

**Learning objectives:**

-   coding standards and techniques
-   uniform styling of code
-   understand the value of using git and GitHub
-   how to minimize the risks and maximize the benefits of collaborative R programming
-   how to approach big projects

## Top 5 tips for efficient collaboration {.unnumbered}

-   Have a consistent coding style.
-   Think carefully about your comments and keep them up to date.
-   Use version control whenever possible.
-   Use informative commit messages.
-   Don't be afraid to elicit feedback from colleagues.

## Code formatting {.unnumbered}

-   Use indentation
    -   two spaces indent the code
    -   `Ctrl + A`, then `Ctrl + I` for indentation afterwards
-   Strive to limit your code to 80 characters per line
-   Never mix tabs with spaces
-   Use of spacing makes your code more readable

```{r, echo=TRUE, eval=FALSE}
# Good style
if(x < 5){
  x
} else {
  y
}
```

## Spacing {-}
-   Add spaces around `+`, `-`, `\` and `*`
-   Add spaces around assignment and comparison operators
-   Add space after a comma
-   Exceptions to the space rule are `:`, `::` and `:::`, as well as `$` and `@`

Spacing can avoid bugs.
```{r, echo=TRUE, eval=FALSE}
# Bug. x now equals 1
x[x<-1]
# Correct. Selecting values less than -1
x[x < -1]
```

## Loading packages {.unnumbered}

-   Use `library` instead of `require`
    -   `library("dplyr")`.
-   Only load packages that you need
-   Use `require` if package is not essential
    -   remember to capture warnings of missing packages
-   Consider a separate file for used librarys

## Commenting is important {.unnumbered}

-   Comments can improve efficiency
-   Collaborators and your future self will be thankful
-   Provide context, not code explanation
-   start each comment with just one `#` and a space
-   `# ----` enables code folding

## Naming files {.unnumbered}

> "There are only two hard things in Computer Science: cache invalidation and naming things." --- Phil Karlton

**R file names**:

-   all lower case and without spaces
-   If files need to be run in sequence, prefix them with numbers

## Object naming {.unnumbered}

-   Helps the reader to follow along, improves project efficiency
-   choose names consistently and sensibly
    - especially for objects that are often used in your code
-   `underscore_separated` format is usually preferred
-   Avoid `.` for the sake of Python programmers
-   Where possible, avoid using names of existing functions and variables
-   use `TRUE/FALSE` instead of `T/F` for clarity.

## Object assignment {.unnumbered}

-   `<-` and `=` can be used **mostly** interchangeably.
-   Difference occurs in function calls.

```{r, eval=FALSE, echo=TRUE}
system.time(expr1 <- rnorm(10e5))
system.time(expr2 = rnorm(10e5)) # error
```

## Version Control {.unnumbered}

-   Keep track of your work progress
-   You can use a shell or RStudio's Git tab
-   Document your work with clear and concise commit messages
-   Push commit to update file on server (GitHub)
-   Use pull to get the latest version of the repository

## GitHub {.unnumbered}

-   Share your work and collaborate on code
-   Write modular code
-   `devtools::install_github()` can be used to install and update packages
-   Make sure you know your collaborators' preferences
    -   Also include other tools, like calls and emails
    -   Not everybody knows Git or wants to use it
    -   It can also create more problems than actually help
-   -   agree on a common style up-front

## GitHub: Things to know {.unnumbered}

-   GitHub offers a vast amount of possibilities
-   Before going in depth, knowing some basics help a great deal
-   Most important features for collaboration:
    -   **branches**: Distinct versions of your repository
    -   **forks**: Like branches but exist on other people's computers
    -   **clones**: Create an exact copy of this repository
    -   **pull request**: Add code to existing project. Provides an opportunity for others to comment on your code before merging


## Review your code {.unnumbered}

Questions to be considered

-   Is the code correct and properly documented?
-   Could the code be improved?
-   Does the code conform to existing style guidelines?
-   Are there any automated tests? If so, are they sufficient?

##  {.unnumbered}

**A good code review shares knowledge and best practices.**

-   Be constructive, suggest improvements
-   Set a time frame/amount of lines that you want to review
-   Review code before merging with large code base

If you don't work in a team, sharing code on a repository or other webpages can get you feedback.

## Meeting Videos {.unnumbered}

### Cohort 1 {.unnumbered}

`r knitr::include_url("https://www.youtube.com/embed/URL")`

<details>

<summary>Meeting chat log</summary>

```         
LOG
```

</details>
